// deno-lint-ignore-file require-await
import { serve } from "https://deno.land/std@0.138.0/http/server.ts";
import { serveDir } from "https://deno.land/std@0.138.0/http/file_server.ts";

//ポケモン一覧獲得
// let pokemonAll = [
//   "フシギダネ",
//   "フシギバナ",
//   "ヒトカゲ",
//   "リザード",
//   "リザードン",
//   "ゼニガメ",
//   "カメール",
//   "カメックス",
//   "キャタピー",
//   "トランセル",
//   "バタフリー",
//   "ビー ドル",
//   "コクーン",
//   "スピアー",
//   "ポッポ",
//   "ピジョン",
//   "ピジョット",
//   "コラッタ",
//   "ラッタ",
//   "オニスズメ",
//   "オニドリル",
//   "アーボ",
//   "アーボック",
//   "ピカチュウ",
//   "ライチュウ",
//   "サンド",
//   "サンドパン",
//   "ニドラン♀",
//   "ニドリーナ",
//   "ニドクイン",
//   "ニドラン♂",
//   "ニドリーノ",
//   "ニドキング",
//   "ピッピ",
//   "ピクシー",
//   "ロコン",
//   "キュウコン",
//   "プリン",
//   "プクリン",
//   "ズバット",
//   "ゴルバット",
//   "ナゾノクサ",
//   "クサイハナ",
//   "ラフレシア",
//   "パラス",
//   "パラセクト",
//   "コンパン",
//   "モルフォン",
//   "ディグダ",
//   "ダグトリオ",
//   "ニャース",
//   "ペルシアン",
//   "コダック",
//   "ゴルダック",
//   "マンキー",
//   "オコリザル",
//   "ガーディ",
//   "ウインディ",
//   "ニョロモ",
//   "ニョロゾ ",
//   "ニョロボン",
//   "ケーシィ",
//   "ユンゲラー",
//   "フーディン",
//   "ワンリキー",
//   "ゴーリキー",
//   "カイリキー",
//   "マダツボミ",
//   "ウツドン",
//   "ウツボット",
//   "メノクラゲ",
//   "ドククラゲ",
//   "イシツブテ",
//   "ゴローン",
//   "ゴローニャ",
//   "ポニータ",
//   "ギャロップ",
//   "ヤドン",
//   "ヤドラン",
//   "コイル",
//   "レアコイル",
//   "カモネギ",
//   "ドードー",
//   "ド ードリオ",
//   "パウワウ",
//   "ジュゴン",
//   "ベトベター",
//   "ベトベトン",
//   "シェルダー",
//   "パルシェン",
//   "ゴース",
//   "ゴースト",
//   "ゲンガー",
//   "イワーク",
//   "スリープ",
//   "ス リーパー",
//   "クラブ",
//   "キングラー",
//   "ビリリダマ",
//   "マルマイン",
//   "タマタマ",
//   "ナッシー",
//   "カラカラ",
//   "ガラガラ",
//   "サワムラー",
//   "エビワラー",
//   "ベロリンガ",
//   "ドガース",
//   "マタドガス",
//   "サイホーン",
//   "サイドン",
//   "ラッキー",
//   "モンジャラ",
//   "ガルーラ",
//   "タッツー",
//   "シードラ",
//   "トサキント",
//   "アズマオウ",
//   "ヒトデマン",
//   "スターミー",
//   "バリヤード",
//   "ストライク",
//   "ルージュラ",
//   "エレブー",
//   "ブーバー",
//   "カイロス",
//   "ケンタロス",
//   "コイキング",
//   "ギャラドス",
//   "ラプラス",
//   "メ タモン",
//   "イーブイ",
//   "シャワーズ",
//   "サンダース",
//   "ブースター",
//   "ポリゴン",
//   "オムナイト",
//   "オムスター",
//   "カブト",
//   "カブトプス",
//   "プテラ",
//   "カビゴン",
//   "フ リーザー",
//   "サンダー",
//   "ファイヤー",
//   "ミニリュウ",
//   "ハクリュー",
//   "カイリュー",
//   "ミュウツー",
//   "ミュウ",
//   "チコリータ",
//   "ベイリーフ",
//   "メガニウム",
//   "ヒノア ラシ",
//   "マグマラシ",
//   "バクフーン",
//   "ワニノコ",
//   "アリゲイツ",
//   "オーダイル",
//   "オタチ",
//   "オオタチ",
//   "ホーホー",
//   "ヨルノズク",
//   "レディバ",
//   "レディアン",
//   "イ トマル",
//   "アリアドス",
//   "クロバット",
//   "초라기",
//   "ランターン",
//   "ピチュー",
//   "ピィ",
//   "ププリン",
//   "トゲピー",
//   "トゲチック",
//   "ネイティ",
//   "ネイティオ",
//   "メリー プ",
//   "モココ",
//   "デンリュウ",
//   "キレイハナ",
//   "マリル",
//   "マリルリ",
//   "ウソッキー",
//   "ニョロトノ",
//   "ハネッコ",
//   "ポポッコ",
//   "ワタッコ",
//   "エイパム",
//   "ヒマナッツ",
//   "キマワリ",
//   "ヤンヤンマ",
//   "ウパー",
//   "ヌオー",
//   "エーフィ",
//   "ブラッキー",
//   "ヤミカラス",
//   "ヤドキング",
//   "ムウマ",
//   "アンノーン",
//   "ソーナンス",
//   "キリンリキ",
//   "クヌギダマ",
//   "フォレトス",
//   "ノコッチ",
//   "グライガー",
//   "ハガネール",
//   "ブルー",
//   "グランブル",
//   "ハリーセン",
//   "ハッサム",
//   "ツボツボ",
//   "ヘラクロス",
//   "ニュー ラ",
//   "ヒメグマ",
//   "リングマ",
//   "マグマッグ",
//   "マグカルゴ",
//   "ウリムー",
//   "イノムー",
//   "サニーゴ",
//   "テッポウオ",
//   "オクタン",
//   "デリバード",
//   "マンタイン",
//   "エア ームド",
//   "デルビル",
//   "ヘルガー",
//   "キングドラ",
//   "ゴマゾウ",
//   "ドンファン",
//   "ポリゴン２",
//   "オドシシ",
//   "ドーブル",
//   "バルキー",
//   "カポエラー",
//   "ムチュール",
//   " エレキッド",
//   "ブビィ",
//   "ミルタンク",
//   "ハピナス",
//   "ライコウ",
//   "エンテイ",
//   "スイクン",
//   "ヨーギラス",
//   "サナギラス",
//   "バンギラス",
//   "ルギア",
//   "ホウオウ",
//   "セ レビィ",
//   "キモリ",
//   "ジュプトル",
//   "ジュカイン",
//   "アチャモ",
//   "ワカシャモ",
//   "バシャーモ",
//   "ミズゴロウ",
//   "ヌマクロー",
//   "ラグラージ",
//   "ポチエナ",
//   "グラエナ",
//   "ジグザグマ",
//   "マッスグマ",
//   "ケムッソ",
//   "カラサリス",
//   "アゲハント",
//   "マユルド",
//   "ドクケイル",
//   "ハスボー",
//   "ハスブレロ",
//   "ルンパッパ",
//   "タネボー",
//   "コノハ ナ",
//   "ダーテング",
//   "スバメ",
//   "オオスバメ",
//   "キャモメ",
//   "ペリッパー",
//   "ラルトス",
//   "キルリア",
//   "サーナイト",
//   "アメタマ",
//   "アメモース",
//   "キノココ",
//   "キノガ ッサ",
//   "ナマケロ",
//   "ヤルキモノ",
//   "ケッキング",
//   "ツチニン",
//   "テッカニン",
//   "ヌケニン",
//   "ゴニョニョ",
//   "ドゴーム",
//   "バクオング",
//   "マクノシタ",
//   "ハリテヤマ",
//   "ルリリ",
//   "ノズパス",
//   "エネコ",
//   "エネコロロ",
//   "ヤミラミ",
//   "クチート",
//   "ココドラ",
//   "コドラ",
//   "ボスゴドラ",
//   "アサナン",
//   "チャーレム",
//   "ラクライ",
//   "ライボル ト",
//   "プラスル",
//   "マイナン",
//   "バルビート",
//   "イルミーゼ",
//   "ロゼリア",
//   "ゴクリン",
//   "マルノーム",
//   "キバニア",
//   "サメハダー",
//   "ホエルコ",
//   "ホエルオー",
//   "ドン メル",
//   "バクーダ",
//   "コータス",
//   "バネブー",
//   "ブーピッグ",
//   "パッチール",
//   "ナックラー",
//   "ビブラーバ",
//   "フライゴン",
//   "サボネア",
//   "ノクタス",
//   "チルット",
//   "チルタリス",
//   "ザングース",
//   "ハブネーク",
//   "ルナトーン",
//   "ソルロック",
//   "ドジョッチ",
//   "ナマズン",
//   "ヘイガニ",
//   "シザリガー",
//   "ヤジロン",
//   "ネンドール",
//   "リリー ラ",
//   "ユレイドル",
//   "アノプス",
//   "アーマルド",
//   "ヒンバス",
//   "ミロカロス",
//   "ポワルン",
//   "カクレオン",
//   "カゲボウズ",
//   "ジュペッタ",
//   "ヨマワル",
//   "サマヨール",
//   "トロピウス",
//   "チリーン",
//   "アブソル",
//   "ソーナノ",
//   "ユキワラシ",
//   "オニゴーリ",
//   "タマザラシ",
//   "トドグラー",
//   "トドゼルガ",
//   "パールル",
//   "ハンテール",
//   "サクラ ビス",
//   "ジーランス",
//   "ラブカス",
//   "タツベイ",
//   "コモルー",
//   "ボーマンダ",
//   "ダンバル",
//   "メタング",
//   "メタグロス",
//   "レジロック",
//   "レジアイス",
//   "レジスチル",
//   " ラティアス",
//   "ラティオス",
//   "カイオーガ",
//   "グラードン",
//   "レックウザ",
//   "ジラーチ",
//   "デオキシス",
//   "ナエトル",
//   "ハヤシガメ",
//   "ドダイトス",
//   "ヒコザル",
//   "モウ カザル",
//   "ゴウカザル",
//   "ポッチャマ",
//   "ポッタイシ",
//   "エンペルト",
//   "ムックル",
//   "ムクバード",
//   "ムクホーク",
//   "ビッパ",
//   "ビーダル",
//   "コロボーシ",
//   "コロトック",
//   "コリンク",
//   "ルクシオ",
//   "レントラー",
//   "スボミー",
//   "ロズレイド",
//   "ズガイドス",
//   "ラムパルド",
//   "タテトプス",
//   "トリデプス",
//   "ミノムッチ",
//   "ミノマダム",
//   "ガ ーメイル",
//   "ミツハニー",
//   "ビークイン",
//   "パチリス",
//   "ブイゼル",
//   "フローゼル",
//   "チェリンボ",
//   "チェリム",
//   "カラナクシ",
//   "トリトドン",
//   "エテボース",
//   "フワン テ",
//   "フワライド",
//   "ミミロル",
//   "ミミロップ",
//   "ムウマージ",
//   "ドンカラス",
//   "ニャルマー",
//   "Purugly",
//   "リーシャン",
//   "スカンプー",
//   "スカタンク",
//   "ドーミラー",
//   "ドータクン",
//   "ウソハチ",
//   "マネネ",
//   "ピンプク",
//   "ペラップ",
//   "ミカルゲ",
//   "フカマル",
//   "ガバイト",
//   "ガブリアス",
//   "ゴンベ",
//   "リオル",
//   "ルカリオ",
//   "ヒポポタ ス",
//   "カバルドン",
//   "スコルピ",
//   "ドラピオン",
//   "グレッグル",
//   "ドクロッグ",
//   "マスキッパ",
//   "ケイコウオ",
//   "ネオラント",
//   "タマンタ",
//   "ユキカブリ",
//   "ユキノオー",
//   "マニューラ",
//   "ジバコイル",
//   "ベロベルト",
//   "ドサイドン",
//   "モジャンボ",
//   "エレキブル",
//   "ブーバーン",
//   "トゲキッス",
//   "メガヤンマ",
//   "リーフィア",
//   "グレイシア ",
//   "グライオン",
//   "マンムー",
//   "ポリゴンＺ",
//   "エルレイド",
//   "ダイノーズ",
//   "ヨノワール",
//   "ユキメノコ",
//   "ロトム",
//   "ユクシー",
//   "エムリット",
//   "アグノム",
//   "ディ アルガ",
//   "パルキア",
//   "ヒードラン",
//   "レジギガス",
//   "ギラティナ",
//   "クレセリア",
//   "フィオネ",
//   "マナフィ",
//   "ダークライ",
//   "シェイミ",
//   "アルセウス",
//   "ビクティニ",
//   "ツタージャ",
//   "ジャノビー",
//   "ジャローダ",
//   "ポカブ",
//   "チャオブー",
//   "エンブオー",
//   "ミジュマル",
//   "フタチマル",
//   "ダイケンキ",
//   "ミネズミ",
//   "Watchog",
//   "ヨー テリー",
//   "ハーデリア",
//   "ムーランド",
//   "チョロネコ",
//   "レパルダス",
//   "ヤナップ",
//   "ヤナッキー",
//   "バオップ",
//   "バオッキー",
//   "ヒヤップ",
//   "ヒヤッキー",
//   "ムンナ",
//   "ムシャーナ",
//   "マメパト",
//   "ハトーボー",
//   "ケンホロウ",
//   "シママ",
//   "ゼブライカ",
//   "ダンゴロ",
//   "ガントル",
//   "ギガイアス",
//   "コロモリ",
//   "ココロモリ",
//   "モグリュー ",
//   "ドリュウズ",
//   "タブンネ",
//   "ドッコラー",
//   "ドテッコツ",
//   "ローブシン",
//   "オタマロ",
//   "ガマガル",
//   "ガマゲロゲ",
//   "ナゲキ",
//   "ダゲキ",
//   "クルミル",
//   "クルマユ",
//   "ハハコモリ",
//   "フシデ",
//   "ホイーガ",
//   "ペンドラー",
//   "モンメン",
//   "エルフーン",
//   "チュリネ",
//   "ドレディア",
//   "バスラオ",
//   "メグロコ",
//   "ワルビル",
//   "ワルビアル",
//   "ダルマッカ",
//   "ヒヒダルマ",
//   "マラカッチ",
//   "イシズマイ",
//   "イワパレス",
//   "ズルッグ",
//   "ズルズキン",
//   "シンボラー",
//   "デスマス",
//   "デスカーン",
//   "プロトーガ",
//   "ア バゴーラ",
//   "アーケン",
//   "アーケオス",
//   "ヤブクロン",
//   "ダストダス",
//   "ゾロア",
//   "ゾロアーク",
//   "チラーミィ",
//   "チラチーノ",
//   "ゴチム",
//   "ゴチミル",
//   "ゴチルゼル",
//   "ユニラン",
//   "ダブラン",
//   "ランクルス",
//   "コアルヒー",
//   "スワンナ",
//   "バニプッチ",
//   "バニリッチ",
//   "バイバニラ",
//   "シキジカ",
//   "メブキジカ",
//   "エモンガ",
//   "カブルモ ",
//   "シュバルゴ",
//   "タマゲタケ",
//   "モロバレル",
//   "プルリル",
//   "ブルンゲル",
//   "ママンボウ",
//   "バチュル",
//   "デンチュラ",
//   "テッシード",
//   "ナットレイ",
//   "ギアル",
//   "ギ ギアル",
//   "ギギギアル",
//   "シビシラス",
//   "シビビール",
//   "シビルドン",
//   "リグレー",
//   "オーベム",
//   "ヒトモシ",
//   "ランプラー",
//   "シャンデラ",
//   "キバゴ",
//   "オノンド",
//   " オノノクス",
//   "クマシュン",
//   "ツンベアー",
//   "フリージオ",
//   "チョボマキ",
//   "アギルダー",
//   "マッギョ",
//   "コジョフー",
//   "コジョンド",
//   "クリムガン",
//   "ゴビット",
//   "ゴ ルーグ",
//   "コマタナ",
//   "キリキザン",
//   "バッフロン",
//   "ワシボン",
//   "ウォーグル",
//   "バルチャイ",
//   "バルジーナ",
//   "クイタラン",
//   "アイアント",
//   "モノズ",
//   "ジヘッド",
//   "サザンドラ",
//   "メラルバ",
//   "ウルガモス",
//   "コバルオン",
//   "テラキオン",
//   "ビリジオン",
//   "トルネロス",
//   "ボルトロス",
//   "レシラム",
//   "ゼクロム",
//   "ランドロス",
//   "キュ レム",
//   "ケルディオ",
//   "メロエッタ",
//   "ゲノセクト",
//   "ハリマロン",
//   "ハリボーグ",
//   "ブリガロン",
//   "フォッコ",
//   "テールナー",
//   "マフォクシー",
//   "ケロマツ",
//   "ゲコガ シラ",
//   "ゲッコウガ",
//   "ホルビー",
//   "ホルード",
//   "ヤヤコマ",
//   "ヒノヤコマ",
//   "ファイアロー",
//   "コフキムシ",
//   "コフーライ",
//   "ビビヨン",
//   "シシコ",
//   "カエンジシ",
//   " フラベベ",
//   "フラエッテ",
//   "フラージェス",
//   "メェークル",
//   "ゴーゴート",
//   "ヤンチャム",
//   "ゴロンダ",
//   "トリミアン",
//   "ニャスパー",
//   "ニャオニクス",
//   "ヒトツキ",
//   " ニダンギル",
//   "ギルガルド",
//   "シュシュプ",
//   "フレフワン",
//   "ペロッパフ",
//   "ペロリーム",
//   "マーイーカ",
//   "カラマネロ",
//   "カメテテ",
//   "ガメノデス",
//   "クズモー",
//   "ド ラミドロ",
//   "ウデッポウ",
//   "ブロスター",
//   "エリキテル",
//   "エレザード",
//   "チゴラス",
//   "ガチゴラス",
//   "アマルス",
//   "アマルルガ",
//   "ニンフィア",
//   "ルチャブル",
//   "デデ ンネ",
//   "メレシー",
//   "ヌメラ",
//   "ヌメイル",
//   "ヌメルゴン",
//   "クレッフィ",
//   "ボクレー",
//   "オーロット",
//   "バケッチャ",
//   "パンプジン",
//   "カチコール",
//   "クレベース",
//   " オンバット",
//   "オンバーン",
//   "ゼルネアス",
//   "イベルタル",
//   "ジガルデ",
//   "ディアンシー",
//   "フーパ",
//   "ボルケニオン",
//   "モクロー",
//   "フクスロー",
//   "ジュナイパー",
//   " ニャビー",
//   "ニャヒート",
//   "ガオガエン",
//   "アシマリ",
//   "オシャマリ",
//   "アシレーヌ",
//   "ツツケラ",
//   "ケララッパ",
//   "ドデカバシ",
//   "ヤングース",
//   "デカグース",
//   "アゴ ジムシ",
//   "デンヂムシ",
//   "クワガノン",
//   "マケンカニ",
//   "ケケンカニ",
//   "オドリドリ",
//   "アブリー",
//   "アブリボン",
//   "イワンコ",
//   "ルガルガン",
//   "ヨワシ",
//   "ヒドイデ",
//   "ドヒドイデ",
//   "ドロバンコ",
//   "バンバドロ",
//   "シズクモ",
//   "オニシズクモ",
//   "カリキリ",
//   "ラランテス",
//   "ネマシュ",
//   "マシェード",
//   "ヤトウモリ",
//   "エンニュート",
//   "ヌイコグマ",
//   "キテルグマ",
//   "アマカジ",
//   "Steenee",
//   "アマージョ",
//   "キュワワー",
//   "ヤレユータン",
//   "ナゲツケサル",
//   "コソクムシ",
//   "グソクムシャ",
//   "スナバァ",
//   "シロデスナ",
//   "ナマコブシ",
//   "タイプ：ヌル",
//   "シルヴァディ",
//   "メテノ",
//   "ネッコアラ",
//   "バクガメス",
//   "トゲデマル",
//   "ミミッキュ",
//   "ハギギシリ",
//   "ジジーロン",
//   "ダダリン",
//   "ジャラコ",
//   "ジャランゴ",
//   "ジャラランガ",
//   "カプ・コケコ",
//   "カプ・テテフ",
//   "カプ・ブルル",
//   "カプ・レヒレ",
//   "コスモッグ",
//   "コスモウム",
//   "ソルガ レオ",
//   "ルナアーラ",
//   "ウツロイド",
//   "マッシブーン",
//   "フェローチェ",
//   "デンジュモク",
//   "テッカグヤ",
//   "カミツルギ",
//   "アクジキング",
//   "ネクロズマ",
//   "マギアナ",
//   "マーシャドー",
//   "ベベノム",
//   "アーゴヨン",
//   "ツンデツンデ",
//   "ズガドーン",
//   "ゼラオラ",
//   "メルタン",
//   "メルメタル",
//   "サルノリ",
//   "バチンキー",
//   "ゴリランダー",
//   "ヒバニー",
//   "ラビフット",
//   "エースバーン",
//   "メッソン",
//   "ジメレオン",
//   "インテレオン",
//   "ホシガリス",
//   "ヨクバリス",
//   "ココガラ",
//   "アオガラス",
//   "アーマーガア",
//   "サッチムシ",
//   "レドームシ",
//   "イオルブ",
//   "クスネ",
//   "フォクスライ",
//   "ヒメンカ",
//   "ワタシラガ",
//   "ウールー",
//   "バイウールー",
//   "カムカメ",
//   "カジリガメ",
//   "ワンパ チ",
//   "パルスワン",
//   "タンドン",
//   "トロッゴン",
//   "セキタンザン",
//   "カジッチュ",
//   "アップリュー",
//   "タルップル",
//   "スナヘビ",
//   "サダイジャ",
//   "ウッウ",
//   "サシカマス",
//   "カマスジョー",
//   "エレズン",
//   "ストリンダー",
//   "ヤクデ",
//   "マルヤクデ",
//   "タタッコ",
//   "オトスパス",
//   "ヤバチャ",
//   "ポットデス",
//   "ミブリム",
//   "テブリム",
//   "ブリム オン",
//   "ベロバー",
//   "ギモー",
//   "オーロンゲ",
//   "タチフサグマ",
//   "ニャイキング",
//   "サニゴーン",
//   "ネギガナイト",
//   "バリコオル",
//   "デスバーン",
//   "マホミル",
//   "マホイ  ップ",
//   "タイレーツ",
//   "バチンウニ",
//   "ユキハミ",
//   "モスノウ",
//   "イシヘンジン",
//   "コオリッポ",
//   "イエッサン",
//   "モルペコ",
//   "ゾウドウ",
//   "ダイオウドウ",
//   "パッチラ  ゴン",
//   "パッチルドン",
//   "ウオノラゴン",
//   "ウオチルドン",
//   "ジュラルドン",
//   "ドラメシヤ",
//   "ドロンチ",
//   "ドラパルト",
//   "ザシアン",
//   "ザマゼンタ",
//   "ムゲンダイナ",
//   "ダクマ",
//   "ウーラオス",
//   "ザルード",
//   "レジエレキ",
//   "レジドラゴ",
//   "ブリザポス",
//   "レイスポス",
//   "バドレックス",
//   "アヤシシ",
//   "バサギリ",
//   "ガチグマ",
//   "イダイトウ",
//   "オオニューラ",
//   "ハリーマン",
//   "ラブトロス",
// ];

let pokemonAll = ["フシギダネ"];
const url = "https://pokeapi.co/api/v2/pokemon-species/";

for (let i = 2; i < 905; i+=2) {
  const data = await fetch(url + Number(i));
  const data2 = await fetch(url + Number(i+1))
  const json = await data.json();
  const json2 = await data2.json();
  const name = await json["names"][0]["name"];
  const name2 = await json2["names"][0]["name"];

  await pokemonAll.push(name);
  await pokemonAll.push(name2);
  // await console.log(name);
  // await console.log(name2);
}
// await console.log(pokemonAll);

//ここを乱数にして、ランダムスタート
let previousWord = [];
//しりとり初期化機構
function shiritoriInit() {
  previousWord = [];
  let tempPoke="";
  while(1){
    tempPoke = pokemonAll[Math.floor(Math.random() * 900)];
    if(tempPoke.charAt(tempPoke.length - 1) !== "ン"){
      previousWord.push(tempPoke);
      console.log(tempPoke);
      break;
    }
  }
}
shiritoriInit();

console.log("Listening on http://localhost:8000");

serve(async (req) => {
  const pathname = new URL(req.url).pathname;

  console.log(pathname);
  console.log(previousWord);
  console.log(req.method);

  if (pathname === "/styles.css") {
    return new Response(await Deno.readTextFile("./public/styles.css"), {
      headers: { "Content-Type": "text/css; charset=utf-8" },
    });
  }
  if(pathname === "/reset" ){
    shiritoriInit();
    return new Response(previousWord[previousWord.length - 1]);
  }
  if(pathname === "/rireki"){
    let shiritoriRireki = previousWord[0];
    for(let i = 1;i<previousWord.length;i++){
      shiritoriRireki += "　→　"+ previousWord[i];
    }
    return new Response(shiritoriRireki);
  }
  if (pathname === "/shiritori" && req.method === "GET") {
    return new Response(previousWord[previousWord.length - 1]);
  }
  if (pathname === "/shiritori" && req.method === "POST") {
    const requestJson = await req.json();
    const nextWord = requestJson.nextWord;

    //カタカナとひらがなを対応
    if (
      !pokemonAll.some(function (element) {
        return element === nextWord;
      })
    ) {
      return new Response("ポケモンではありません", { status: 400 });
    } else if (
      previousWord.some(function (element) {
        return (
          element === kanaToHira(nextWord) || element === hiraToKana(nextWord)
        );
      })
    ) {
      return new Response("既出の単語です。", { status: 400 });
    } else if (
      nextWord.length > 0 &&
      previousWord[previousWord.length - 1].charAt(
        previousWord[previousWord.length - 1].length - 1
      ) !== kanaToHira(nextWord).charAt(0) &&
      previousWord[previousWord.length - 1].charAt(
        previousWord[previousWord.length - 1].length - 1
      ) !== hiraToKana(nextWord).charAt(0)
    ) {
      return new Response("前の単語に続いていません。", { status: 400 });
      //↓最終的には終了処理
    } else if (kanaToHira(nextWord).charAt(nextWord.length - 1) === "ん") {
      shiritoriInit();
      return new Response(previousWord[previousWord.length - 1], { status: 418 });
    }

    previousWord.push(nextWord);

    return new Response(previousWord[previousWord.length - 1]);
  }

  return serveDir(req, {
    fsRoot: "public",

    urlRoot: "",

    showDirListing: true,

    enableCors: true,
  });
});

function kanaToHira(str) {
  return str.replace(/[\u30a1-\u30f6]/g, function (match) {
    var chr = match.charCodeAt(0) - 0x60;
    return String.fromCharCode(chr);
  });
}

function hiraToKana(str) {
  return str.replace(/[\u3041-\u3096]/g, function (match) {
    var chr = match.charCodeAt(0) + 0x60;
    return String.fromCharCode(chr);
  });
}
